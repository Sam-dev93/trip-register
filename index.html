<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gulliver's Theme Park Register</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(20px);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .header h1 {
            color: #333;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .date-time {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-add {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            box-shadow: 0 4px 15px rgba(17, 153, 142, 0.3);
        }

        .btn-add:hover {
            box-shadow: 0 6px 20px rgba(17, 153, 142, 0.4);
        }

        .sections {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        @media (max-width: 768px) {
            .sections {
                grid-template-columns: 1fr;
            }
        }

        .section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            color: #333;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .boys-title {
            color: #4285f4;
        }

        .girls-title {
            color: #ea4335;
        }

        .class-group {
            margin-bottom: 25px;
        }

        .class-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #555;
            margin-bottom: 15px;
            padding: 10px 15px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 10px;
            text-align: center;
        }

        .student-card {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            margin-bottom: 10px;
            background: #fafafa;
            border-radius: 12px;
            border-left: 4px solid #ddd;
            transition: all 0.3s ease;
        }

        .student-card:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .student-info {
            display: flex;
            flex-direction: column;
        }

        .student-name {
            font-weight: 600;
            color: #333;
            font-size: 1.1rem;
        }

        .attendance-history {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }

        .status-buttons {
            display: flex;
            gap: 8px;
        }

        .status-btn {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .status-btn:hover {
            transform: scale(1.1);
        }

        .present {
            background: #4CAF50;
            color: white;
        }

        .late {
            background: #FF9800;
            color: white;
        }

        .absent {
            background: #F44336;
            color: white;
        }

        .student-card.status-present {
            border-left-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
        }

        .student-card.status-late {
            border-left-color: #FF9800;
            background: rgba(255, 152, 0, 0.1);
        }

        .student-card.status-absent {
            border-left-color: #F44336;
            background: rgba(244, 67, 54, 0.1);
        }

        .summary {
            margin-top: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            color: white;
            text-align: center;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 30px;
            border: none;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .modal-header h2 {
            color: #333;
            font-size: 1.8rem;
            font-weight: 700;
        }

        .close {
            position: absolute;
            right: 20px;
            top: 20px;
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #333;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
            font-size: 1rem;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
        }

        .btn-cancel {
            background: #e0e0e0;
            color: #333;
            box-shadow: none;
        }

        .btn-cancel:hover {
            background: #d0d0d0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸŽ¢ Gulliver's Theme Park Register</h1>
            <div class="date-time" id="dateTime"></div>
            <div class="controls">
                <button class="btn btn-add" onclick="showAddStudentModal()">âž• Add Student</button>
                <button class="btn" onclick="clearAll()">ðŸ”„ Clear All</button>
                <button class="btn" onclick="markAllPresent()">âœ… Mark All Present</button>
                <button class="btn" onclick="exportToPDF()">ðŸ“„ Export PDF</button>
            </div>
        </div>

        <div class="sections">
            <div class="section">
                <h2 class="section-title boys-title">ðŸ‘¦ Boys</h2>
                <div id="boysSection"></div>
            </div>
            
            <div class="section">
                <h2 class="section-title girls-title">ðŸ‘§ Girls</h2>
                <div id="girlsSection"></div>
            </div>
        </div>

        <div class="summary">
            <h3>ðŸ“Š Attendance Summary</h3>
            <div class="summary-stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalPresent">0</div>
                    <div class="stat-label">Present</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalLate">0</div>
                    <div class="stat-label">Late</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalAbsent">0</div>
                    <div class="stat-label">Absent</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalStudents">64</div>
                    <div class="stat-label">Total Students</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Student Modal -->
    <div id="addStudentModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAddStudentModal()">&times;</span>
            <div class="modal-header">
                <h2>âž• Add New Student</h2>
            </div>
            <form id="addStudentForm" onsubmit="addStudent(event)">
                <div class="form-group">
                    <label class="form-label" for="studentName">Student Name</label>
                    <input type="text" id="studentName" class="form-input" required placeholder="Enter student name">
                </div>
                <div class="form-group">
                    <label class="form-label" for="studentClass">Select Class</label>
                    <select id="studentClass" class="form-select" required>
                        <option value="">Choose a class...</option>
                        <optgroup label="Boys Classes">
                            <option value="Class 1B">Class 1B</option>
                            <option value="Class 2B">Class 2B</option>
                            <option value="Class 3B">Class 3B</option>
                            <option value="Class 4B">Class 4B</option>
                            <option value="Class 5B">Class 5B</option>
                            <option value="Class 6B">Class 6B</option>
                            <option value="HIFZ">HIFZ</option>
                            <option value="Weekend Boys">Weekend Boys</option>
                        </optgroup>
                        <optgroup label="Girls Classes">
                            <option value="Class 2G">Class 2G</option>
                            <option value="Class 3G">Class 3G</option>
                            <option value="Class 4G">Class 4G</option>
                            <option value="Class 5G">Class 5G</option>
                            <option value="Class 6G">Class 6G</option>
                            <option value="Weekend Girls">Weekend Girls</option>
                        </optgroup>
                    </select>
                </div>
                <div class="form-buttons">
                    <button type="button" class="btn btn-cancel" onclick="closeAddStudentModal()">Cancel</button>
                    <button type="submit" class="btn">Add Student</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        const boysData = {
            "Class 1B": ["Adyan Hussain", "Jabir Yahya Ahmed", "Yunus Ahmed", "Adel Ahmed"],
            "Class 2B": ["Qbeer Sameer", "Arafat Hussain", "Musa Ahmed", "Syed Zahid Hussain", "Abdiwahhab Ibrahim", "Labid Hossain", "Md Zayan Waseem", "Sekou Sheik Dabo"],
            "Class 3B": ["Tasal Sameer", "Rayan Malik", "Yasir Ahmed"],
            "Class 4B": ["Cabdullahi Ibrahim"],
            "Class 5B": ["Hamza Khan", "Yaseen Uddipan", "Safwan Ahmed"],
            "Class 6B": ["Rafsun Mahmud", "Mohamed Bakar", "Ridwan Okesola", "Junaet Rahman", "Yasin Khan", "Hameem Khan", "Shafay Ali", "Hameem Khan", "Hassan Ahmed"],
            "HIFZ": ["Ismail Hussain", "Ayaan Miah", "Cabdulqadir Ibrahim", "Fahim Choudhury"],
            "Weekend Boys": ["Nahyaan Noor", "Zeeshan Noor", "Abdul Bahir", "Zaid Thahseen"]
        };

        const girlsData = {
            "Class 2G": ["Aya Ali", "Ayaat Rahman"],
            "Class 3G": ["Aarifah Akhter", "Eliza Ahmed", "Raheer Sameer", "Ayesha Malik"],
            "Class 4G": ["Aleena Hamed", "Maria Ahmed", "Jannat Hussain", "Zainab Islam", "Famiha Kobir"],
            "Class 5G": ["Zaynah Ahmed", "Aaliyah Agwan", "Mahdiya Rahman", "Sumaya Ibrahim"],
            "Class 6G": ["Saarah Agwan", "Nadia Rahman", "Aidha Talukdar", "Areesha Nehar", "Aminah Ismath", "Amelia Choudhury", "Marwa Rahman", "Latifah Abow", "Jihan Al Nouman", "Liyana Syed"],
            "Weekend Girls": ["Afsheen", "Maryam", "Habiba Ahmed"]
        };

        let attendanceData = {};

        function updateDateTime() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            document.getElementById('dateTime').textContent = now.toLocaleDateString('en-GB', options);
        }

        function generateStudentId(className, studentName) {
            return `${className}-${studentName}`.replace(/\s+/g, '-').toLowerCase();
        }

        function markAttendance(studentId, status) {
            const now = new Date().toLocaleTimeString('en-GB', {hour: '2-digit', minute: '2-digit'});
            
            if (!attendanceData[studentId]) {
                attendanceData[studentId] = [];
            }
            
            attendanceData[studentId].push({
                status: status,
                time: now
            });
            
            updateStudentCard(studentId, status);
            updateSummary();
        }

        function updateStudentCard(studentId, status) {
            const card = document.querySelector(`[data-student-id="${studentId}"]`);
            if (card) {
                // Remove previous status classes
                card.classList.remove('status-present', 'status-late', 'status-absent');
                card.classList.add(`status-${status}`);
                
                // Update attendance history
                const historyElement = card.querySelector('.attendance-history');
                const history = attendanceData[studentId] || [];
                const historyText = history.map(entry => `${entry.time} (${entry.status})`).join(', ');
                historyElement.textContent = historyText ? `Last: ${historyText}` : 'No attendance recorded';
            }
        }

        function createStudentCard(className, studentName) {
            const studentId = generateStudentId(className, studentName);
            
            return `
                <div class="student-card" data-student-id="${studentId}">
                    <div class="student-info">
                        <div class="student-name">${studentName}</div>
                        <div class="attendance-history">No attendance recorded</div>
                    </div>
                    <div class="status-buttons">
                        <button class="status-btn present" onclick="markAttendance('${studentId}', 'present')" title="Present">âœ“</button>
                        <button class="status-btn late" onclick="markAttendance('${studentId}', 'late')" title="Late">âš </button>
                        <button class="status-btn absent" onclick="markAttendance('${studentId}', 'absent')" title="Absent">âœ—</button>
                    </div>
                </div>
            `;
        }

        function renderSection(data, containerId) {
            const container = document.getElementById(containerId);
            let html = '';
            
            for (const [className, students] of Object.entries(data)) {
                html += `
                    <div class="class-group">
                        <div class="class-title">${className}</div>
                        ${students.map(student => createStudentCard(className, student)).join('')}
                    </div>
                `;
            }
            
            container.innerHTML = html;
        }

        function updateSummary() {
            let present = 0, late = 0, absent = 0;
            
            for (const records of Object.values(attendanceData)) {
                if (records.length > 0) {
                    const lastRecord = records[records.length - 1];
                    if (lastRecord.status === 'present') present++;
                    else if (lastRecord.status === 'late') late++;
                    else if (lastRecord.status === 'absent') absent++;
                }
            }
            
            document.getElementById('totalPresent').textContent = present;
            document.getElementById('totalLate').textContent = late;
            document.getElementById('totalAbsent').textContent = absent;
            
            // Update total students count
            let totalStudents = 0;
            for (const students of Object.values(boysData)) {
                totalStudents += students.length;
            }
            for (const students of Object.values(girlsData)) {
                totalStudents += students.length;
            }
            document.getElementById('totalStudents').textContent = totalStudents;
        }

        function clearAll() {
            if (confirm('Are you sure you want to clear all attendance data?')) {
                attendanceData = {};
                document.querySelectorAll('.student-card').forEach(card => {
                    card.classList.remove('status-present', 'status-late', 'status-absent');
                    card.querySelector('.attendance-history').textContent = 'No attendance recorded';
                });
                updateSummary();
            }
        }

        function markAllPresent() {
            if (confirm('Mark all students as present?')) {
                const allStudentCards = document.querySelectorAll('.student-card');
                allStudentCards.forEach(card => {
                    const studentId = card.getAttribute('data-student-id');
                    markAttendance(studentId, 'present');
                });
            }
        }

        function showAddStudentModal() {
            document.getElementById('addStudentModal').style.display = 'block';
            document.getElementById('studentName').focus();
        }

        function closeAddStudentModal() {
            document.getElementById('addStudentModal').style.display = 'none';
            document.getElementById('addStudentForm').reset();
        }

        function addStudent(event) {
            event.preventDefault();
            
            const studentName = document.getElementById('studentName').value.trim();
            const className = document.getElementById('studentClass').value;
            
            if (!studentName || !className) {
                alert('Please fill in all fields');
                return;
            }
            
            // Determine if it's a boys or girls class
            const isBoysClass = className.includes('B') || className === 'HIFZ' || className === 'Weekend Boys';
            
            if (isBoysClass) {
                if (!boysData[className]) {
                    boysData[className] = [];
                }
                boysData[className].push(studentName);
                boysData[className].sort(); // Sort alphabetically
                renderSection(boysData, 'boysSection');
            } else {
                if (!girlsData[className]) {
                    girlsData[className] = [];
                }
                girlsData[className].push(studentName);
                girlsData[className].sort(); // Sort alphabetically
                renderSection(girlsData, 'girlsSection');
            }
            
            updateSummary();
            closeAddStudentModal();
            
            // Show success message
            alert(`${studentName} has been added to ${className}`);
        }

        function exportToPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Title
            doc.setFontSize(20);
            doc.setFont(undefined, 'bold');
            doc.text("Gulliver's Theme Park Register", 20, 30);
            
            // Date
            doc.setFontSize(12);
            doc.setFont(undefined, 'normal');
            doc.text(new Date().toLocaleDateString('en-GB'), 20, 40);
            
            let yPosition = 60;
            
            // Boys section
            doc.setFontSize(16);
            doc.setFont(undefined, 'bold');
            doc.text("Boys", 20, yPosition);
            yPosition += 10;
            
            for (const [className, students] of Object.entries(boysData)) {
                doc.setFontSize(12);
                doc.setFont(undefined, 'bold');
                doc.text(className, 25, yPosition);
                yPosition += 8;
                
                doc.setFont(undefined, 'normal');
                students.forEach(student => {
                    const studentId = generateStudentId(className, student);
                    const records = attendanceData[studentId] || [];
                    const status = records.length > 0 ? records[records.length - 1].status : 'not marked';
                    
                    doc.text(`â€¢ ${student} - ${status}`, 30, yPosition);
                    yPosition += 6;
                    
                    if (yPosition > 270) {
                        doc.addPage();
                        yPosition = 20;
                    }
                });
                yPosition += 5;
            }
            
            // Girls section
            yPosition += 10;
            if (yPosition > 250) {
                doc.addPage();
                yPosition = 20;
            }
            
            doc.setFontSize(16);
            doc.setFont(undefined, 'bold');
            doc.text("Girls", 20, yPosition);
            yPosition += 10;
            
            for (const [className, students] of Object.entries(girlsData)) {
                doc.setFontSize(12);
                doc.setFont(undefined, 'bold');
                doc.text(className, 25, yPosition);
                yPosition += 8;
                
                doc.setFont(undefined, 'normal');
                students.forEach(student => {
                    const studentId = generateStudentId(className, student);
                    const records = attendanceData[studentId] || [];
                    const status = records.length > 0 ? records[records.length - 1].status : 'not marked';
                    
                    doc.text(`â€¢ ${student} - ${status}`, 30, yPosition);
                    yPosition += 6;
                    
                    if (yPosition > 270) {
                        doc.addPage();
                        yPosition = 20;
                    }
                });
                yPosition += 5;
            }
            
            const filename = `gullivers-register-${new Date().toISOString().split('T')[0]}.pdf`;
            doc.save(filename);
        }

        // Close modal when clicking outside of it
        window.onclick = function(event) {
            const modal = document.getElementById('addStudentModal');
            if (event.target == modal) {
                closeAddStudentModal();
            }
        }

        // Initialize the app
        function init() {
            updateDateTime();
            setInterval(updateDateTime, 60000); // Update every minute
            
            renderSection(boysData, 'boysSection');
            renderSection(girlsData, 'girlsSection');
            
            updateSummary();
        }

        // Start the app when page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>